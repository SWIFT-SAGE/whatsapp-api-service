<%
// Structured Data Configuration
const structuredData = locals.structuredData || {};
const baseUrl = locals.baseUrl || 'https://whatsapp-api.com';
%>

<!-- JSON-LD Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebSite",
      "@id": "<%= baseUrl %>/#website",
      "url": "<%= baseUrl %>",
      "name": "API MESSAGING - WhatsApp API",
      "description": "Professional WhatsApp Business API integration platform",
      "publisher": {
        "@id": "<%= baseUrl %>/#organization"
      },
      "potentialAction": {
        "@type": "SearchAction",
        "target": {
          "@type": "EntryPoint",
          "urlTemplate": "<%= baseUrl %>/search?q={search_term_string}"
        },
        "query-input": "required name=search_term_string"
      }
    },
    {
      "@type": "Organization",
      "@id": "<%= baseUrl %>/#organization",
      "name": "API MESSAGING",
      "url": "<%= baseUrl %>",
      "logo": {
        "@type": "ImageObject",
        "url": "<%= baseUrl %>/android-chrome-512x512.png",
        "width": 512,
        "height": 512
      },
      "sameAs": [
        "https://twitter.com/whatsappapi",
        "https://github.com/whatsapp-api",
        "https://linkedin.com/company/whatsapp-api"
      ],
      "contactPoint": {
        "@type": "ContactPoint",
        "telephone": "+1-555-123-4567",
        "contactType": "Customer Service",
        "email": "support@whatsapp-api.com",
        "availableLanguage": ["English"]
      }
    },
    {
      "@type": "SoftwareApplication",
      "name": "WhatsApp API Service",
      "operatingSystem": "Web Browser, iOS, Android",
      "applicationCategory": "BusinessApplication",
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "reviewCount": "1250",
        "bestRating": "5",
        "worstRating": "1"
      },
      "offers": {
        "@type": "AggregateOffer",
        "lowPrice": "0",
        "highPrice": "299",
        "priceCurrency": "USD",
        "priceSpecification": [
          {
            "@type": "UnitPriceSpecification",
            "price": "0",
            "priceCurrency": "USD",
            "name": "Free Plan"
          },
          {
            "@type": "UnitPriceSpecification",
            "price": "25",
            "priceCurrency": "USD",
            "name": "Basic Plan"
          },
          {
            "@type": "UnitPriceSpecification",
            "price": "40",
            "priceCurrency": "USD",
            "name": "Pro Plan"
          }
        ]
      },
      "description": "Professional WhatsApp Business API integration for modern applications",
      "screenshot": "<%= baseUrl %>/images/dashboard-screenshot.png",
      "author": {
        "@id": "<%= baseUrl %>/#organization"
      }
    }
  ]
}
</script>

<% if (locals.showPricingSchema) { %>
<!-- Pricing Schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "ItemList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "item": {
        "@type": "Product",
        "name": "Free Plan",
        "description": "5 Messages Total, 1 Chatbot, Basic Support, API Access",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD",
          "availability": "https://schema.org/InStock",
          "priceValidUntil": "2025-12-31"
        },
        "brand": {
          "@type": "Brand",
          "name": "API MESSAGING"
        }
      }
    },
    {
      "@type": "ListItem",
      "position": 2,
      "item": {
        "@type": "Product",
        "name": "Basic Plan",
        "description": "100,000 Messages/month, 1 Chatbot, Email Support, Webhooks, Analytics",
        "offers": {
          "@type": "Offer",
          "price": "25",
          "priceCurrency": "USD",
          "availability": "https://schema.org/InStock",
          "priceValidUntil": "2025-12-31"
        },
        "brand": {
          "@type": "Brand",
          "name": "API MESSAGING"
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "4.9",
          "reviewCount": "450"
        }
      }
    },
    {
      "@type": "ListItem",
      "position": 3,
      "item": {
        "@type": "Product",
        "name": "Pro Plan",
        "description": "Unlimited API Messages, 10,000 Bot Messages/month, 2 Chatbots, Priority Support",
        "offers": {
          "@type": "Offer",
          "price": "40",
          "priceCurrency": "USD",
          "availability": "https://schema.org/InStock",
          "priceValidUntil": "2025-12-31"
        },
        "brand": {
          "@type": "Brand",
          "name": "API MESSAGING"
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "4.8",
          "reviewCount": "800"
        }
      }
    }
  ]
}
</script>
<% } %>

<% if (locals.showFAQSchema) { %>
<!-- FAQ Schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "Is this the official WhatsApp Business API?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "This is a developer-friendly wrapper designed for demos and prototyping. For production, ensure you comply with WhatsApp policies."
      }
    },
    {
      "@type": "Question",
      "name": "Do you support webhooks?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, our Basic and Premium plans support webhooks for message events."
      }
    },
    {
      "@type": "Question",
      "name": "Is there a free plan?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Absolutely. The free plan includes 1 WhatsApp session and 100 messages/day so you can test quickly."
      }
    },
    {
      "@type": "Question",
      "name": "Can I build a chatbot?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, the Premium plan unlocks the chatbot module with rules and testing."
      }
    }
  ]
}
</script>
<% } %>

<% if (locals.showReviewSchema) { %>
<!-- Review Schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Review",
  "itemReviewed": {
    "@type": "SoftwareApplication",
    "name": "WhatsApp API Service",
    "applicationCategory": "BusinessApplication"
  },
  "reviewRating": {
    "@type": "Rating",
    "ratingValue": "4.8",
    "bestRating": "5",
    "worstRating": "1"
  },
  "author": {
    "@type": "Person",
    "name": "Various Users"
  },
  "reviewBody": "Professional WhatsApp Business API with excellent documentation and support."
}
</script>
<% } %>

